# War Panel Development Workflow

To prevent AI hallucination and code conflicts, follow this strict sequential workflow when building a new feature.

## Step 1: The Blueprint (Agent Omega)
1. Open a new chat. Load the `@omega-lead.md` persona.
2. State the goal: *"We need to add NASA FIRMS thermal anomaly tracking to the map."*
3. Omega will provide a `SPEC.md` detailing the required database schema, the backend logic, and the UI components.

## Step 2: Backend Execution (Agent Alpha & Gamma)
1. Open a new chat. Load the `@alpha-backend.md` (and `@gamma-ai.md` if AI is needed).
2. Attach the `SPEC.md` generated by Omega, plus relevant files (e.g., `@server/data-fetcher.ts`, `@shared/schema.ts`).
3. Instruct Alpha: *"Implement the backend fetcher and websocket broadcast for this spec."*
4. Verify the backend works (check terminal logs, check DB inserts) before touching the UI.

## Step 3: Frontend Execution (Agent Beta)
1. Open a new chat. Load the `@beta-frontend.md` persona.
2. Attach the `SPEC.md` and relevant UI files (e.g., `@client/src/components/war-map.tsx`).
3. Instruct Beta: *"Alpha has finished the backend. The WebSocket is now broadcasting the new data. Update the UI to render it according to the spec."*

## Step 4: Deployment & Security (Agent Delta)
1. Open a new chat. Load the `@delta-devops.md` persona.
2. If new environment variables, ports, or scaling requirements were added, instruct Delta to update the Nginx config, PM2 ecosystem file, and UFW rules accordingly.
3. Instruct Delta: *"We've added a new data source. Here are the new env vars. Update the deployment configuration."*

## Step 5: Commit & Verify
1. Review all changes across `server/`, `client/`, and `shared/`.
2. Run the build: `npm run build`.
3. Test locally, then deploy to the Hetzner VPS.
4. Verify WebSocket connections, data flow, and map rendering in production.
